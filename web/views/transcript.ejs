<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Transcript</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
  <header class="navbar">
    <div class="nav-left"><a href="/">Tickets</a></div>
    <div class="nav-center">
      <strong><%= filename %></strong>
      <% if (ownerId || steamId || ticketId) { %>
        <div class="muted" style="font-size:12px; margin-top:4px;">
          <% if (ticketId) { %>Ticket #<%= ticketId %><% } %>
          <% if (ownerId) { %> • Discord: <%= ownerId %><% } %>
          <% if (steamId) { %> • SteamID: <%= steamId %><% } %>
        </div>
      <% } %>
    </div>
    <div class="nav-right">
      <% if (roleFlags && roleFlags.isStaff) { %>
        <a class="btn" href="/staff">Staff View</a>
      <% } %>
      <% if (canSeeApplications) { %>
        <a class="btn" href="/applications">Applications</a>
      <% } %>
      <a class="btn" href="/logout">Logout</a>
    </div>
  </header>
  <div class="iframe-wrap">
    <iframe src="/transcripts/raw/<%= filename %>" title="Transcript"></iframe>
  </div>
  <div class="container" style="margin-top:12px;">
    <% const isFull = filename.endsWith('.full.html'); %>
    <% const isStaff = filename.endsWith('.staff.html'); %>
    <% const base = filename.replace(/\.(?:full|staff)?\.html$/i, ''); %>
    <div class="muted">Other views:</div>
    <div style="display:flex; gap:8px; margin-top:6px;">
      <% if (!isFull) { %>
        <a class="btn" href="/transcripts/<%= base %>.full.html">Full</a>
      <% } %>
      <% if (!isStaff) { %>
        <a class="btn" href="/transcripts/<%= base %>.staff.html">Staff</a>
      <% } %>
      <% if (!filename.endsWith('.html') || isFull || isStaff) { %>
        <a class="btn" href="/transcripts/<%= base %>.html">User</a>
      <% } %>
    </div>
  </div>
</body>
</html>

